---
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import { generateURL, getUniqueTags } from "../../utils";

const posts = await getCollection("blog", post => !post.data.hide);
const tags = getUniqueTags(posts);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <main>
      <h1>Tags</h1>
      <p>All the tags used in posts.</p>
      <ul class="blog-tags">
        {
          tags.map(tag => (
            <li>
              <a
                href={generateURL(`/tags/${tag}/`)}
                transition:name={`tag-${tag}`}
              >
                #{tag}
              </a>
            </li>
          ))
        }
      </ul>
    </main>
    <Footer />
  </body>
</html>

<style>
  h1 {
    margin-bottom: 0;
  }
  ul.blog-tags {
    list-style-type: none;
    padding: unset;
  }
  ul.blog-tags li {
    display: inline-block;
    margin-right: 12px;
    margin-bottom: 12px;
  }
  ul.blog-tags li a:visited {
    color: var(--visited-color);
  }
  a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
  }
  a {
    text-decoration: underline;
    text-decoration-style: dashed;
    text-underline-offset: 4px;
  }
  a:hover {
    text-decoration: underline;
  }
</style>
